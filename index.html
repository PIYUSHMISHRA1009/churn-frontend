<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Customer Churn Predictor - Advanced</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>ðŸ”® Customer Churn Predictor</h1>

    <div class="main-content">

      <!-- Form Section -->
      <form id="churnForm" class="glass-form" autocomplete="off">
        <div class="form-row">
          <input type="text" name="gender" placeholder="Gender (Male/Female)" required 
            title="Enter 'Male' or 'Female'" />
          <input type="number" name="SeniorCitizen" placeholder="Senior Citizen (0 or 1)" required 
            min="0" max="1" title="Enter 0 if not senior citizen, 1 if senior citizen" />
        </div>

        <div class="form-row">
          <input type="text" name="Partner" placeholder="Partner (Yes/No)" required 
            title="Enter 'Yes' or 'No'" />
          <input type="text" name="Dependents" placeholder="Dependents (Yes/No)" required 
            title="Enter 'Yes' or 'No'" />
        </div>

        <div class="form-row">
          <input type="number" name="tenure" placeholder="Tenure (months)" required min="0"
            title="Enter number of months customer has stayed" />
          <input type="text" name="PhoneService" placeholder="Phone Service (Yes/No)" required
            title="Enter 'Yes' or 'No'" />
        </div>

        <div class="form-row">
          <input type="text" name="MultipleLines" placeholder="Multiple Lines (Yes/No/No phone service)" required
            title="Enter 'Yes', 'No' or 'No phone service'" />
          <input type="text" name="InternetService" placeholder="Internet Service (DSL/Fiber optic/No)" required
            title="Enter 'DSL', 'Fiber optic' or 'No'" />
        </div>

        <div class="form-row">
          <input type="text" name="OnlineSecurity" placeholder="Online Security (Yes/No/No internet service)" required
            title="Enter 'Yes', 'No' or 'No internet service'" />
          <input type="text" name="OnlineBackup" placeholder="Online Backup (Yes/No/No internet service)" required
            title="Enter 'Yes', 'No' or 'No internet service'" />
        </div>

        <div class="form-row">
          <input type="text" name="DeviceProtection" placeholder="Device Protection (Yes/No/No internet service)" required
            title="Enter 'Yes', 'No' or 'No internet service'" />
          <input type="text" name="TechSupport" placeholder="Tech Support (Yes/No/No internet service)" required
            title="Enter 'Yes', 'No' or 'No internet service'" />
        </div>

        <div class="form-row">
          <input type="text" name="StreamingTV" placeholder="Streaming TV (Yes/No/No internet service)" required
            title="Enter 'Yes', 'No' or 'No internet service'" />
          <input type="text" name="StreamingMovies" placeholder="Streaming Movies (Yes/No/No internet service)" required
            title="Enter 'Yes', 'No' or 'No internet service'" />
        </div>

        <div class="form-row">
          <input type="text" name="Contract" placeholder="Contract (Month-to-month/One year/Two year)" required
            title="Enter contract type" />
          <input type="text" name="PaperlessBilling" placeholder="Paperless Billing (Yes/No)" required
            title="Enter 'Yes' or 'No'" />
        </div>

        <div class="form-row">
          <input type="text" name="PaymentMethod" placeholder="Payment Method" required
            title="Enter payment method" />
        </div>

        <div class="form-row">
          <input type="number" step="0.01" name="MonthlyCharges" placeholder="Monthly Charges" required min="0"
            title="Enter monthly charge amount" />
          <input type="number" step="0.01" name="TotalCharges" placeholder="Total Charges" required min="0"
            title="Enter total charge amount" />
        </div>

        <div class="form-buttons">
          <button type="submit">ðŸš€ Predict</button>
          <button type="button" id="loadSampleBtn">ðŸ“‚ Load Sample Data</button>
          <button type="button" id="exportSingleBtn">ðŸ’¾ Export Single Prediction CSV</button>
        </div>
      </form>

      <!-- Output Section -->
      <div class="result-card" id="output">
        <div id="gaugeContainer" class="gauge" aria-label="Churn probability gauge" role="img">
          <svg viewBox="0 0 36 36" aria-hidden="true">
            <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831"/>
            <path id="gaugeBar" class="circle" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831"/>
          </svg>
          <div class="gauge-text" id="churnValue">--%</div>
        </div>
        <h2 id="predictionResult">Awaiting Prediction...</h2>
        <div id="insights"></div>
      </div>

    </div>

    <hr />

    <!-- Batch Upload Section -->
    <section class="batch-section">
      <h2>Batch Prediction via CSV Upload</h2>
      <input type="file" id="csvUpload" accept=".csv" />
      <div class="batch-controls">
        <button type="button" id="exportBatchBtn" disabled>ðŸ’¾ Export Batch Results CSV</button>
        <button type="button" id="clearBatchBtn">ðŸ§¹ Clear Batch Results</button>
      </div>

      <div id="batchSummary"></div>

      <table id="batchResultsTable" style="display:none;">
        <thead>
          <tr></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

  <script src="script.js"></script>
</body>
</html>
